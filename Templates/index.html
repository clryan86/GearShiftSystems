{% extends "base.html" %}
{% block content %}

<!-- Header Section -->
<div class="card" style="background:#1e293b; border-color:#334155; text-align:center; padding:20px;">
  <h1 style="color:#38bdf8; margin:0;">⚙️ GearShift Systems</h1>
  <p class="muted">Streamline your automotive inventory management</p>

  <!-- Search bar -->
  <form action="{{ url_for('list_parts') }}" method="get" class="mt-3">
    <input type="text" name="search" placeholder="Search parts..."
           style="padding:5px; border-radius:5px; border:1px solid #475569;">
    <button class="btn btn-accent" type="submit">Search</button>
  </form>
</div>

<!-- Low Stock Section -->
<div class="card mt-4">
  <div class="title">Welcome</div>
  <p class="subtitle">Manage automotive parts, vendors, and low-stock alerts in a simple, focused workflow.</p>

  {% if low_parts and low_parts|length > 0 %}
    <div class="banner mt-2">
      <strong>Low stock alert:</strong>
      <div class="muted">These parts are at or below their reorder threshold:</div>
      <ul class="mt-2">
        {% for p in low_parts %}
          <li class="mb-1">
            <span class="badge-low">LOW</span>
            {{ p.name }} (SKU: {{ p.sku }}) — stock: {{ p.stock }}, threshold: {{ p.reorder_threshold }}
            {% if p.vendor %} · vendor: {{ p.vendor.name }}{% endif %}
          </li>
        {% endfor %}
      </ul>
    </div>
  {% else %}
    <div class="card" style="background:#0d162c; border-color:#1e3a8a; margin-top:10px;">
      ✅ Inventory looks healthy. No low-stock items right now.
    </div>
  {% endif %}
</div>

<!-- Quick Actions Section -->
<div class="card">
  <div class="title">Quick Actions</div>
  <div class="d-flex flex-wrap gap-2">
    <a class="btn btn-primary" href="{{ url_for('list_parts') }}">View Parts</a>
    <a class="btn btn-accent" href="{{ url_for('add_part') }}">Add New Part</a>

    <form action="{{ url_for('draft_reorder') }}" method="post" onsubmit="return confirm('Create a draft reorder for all low-stock items?');">
      <button class="btn btn-warn" type="submit">Create Draft Reorder (Low Stock)</button>
    </form>
  </div>
  <p class="muted mt-2">Draft reorder will collect all low-stock items with suggested quantities.</p>
</div>

<!-- Footer Section -->
<div class="card mt-4" style="text-align:center; background:#0f172a; border-color:#1e293b;">
  <p class="muted">© 2025 GearShift Systems</p>
  <a class="btn btn-light" href="{{ url_for('contact') }}">Contact Us</a>
</div>

{% endblock %}
